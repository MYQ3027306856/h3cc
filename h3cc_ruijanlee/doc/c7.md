H3Cc
=====

H3c connect  - 强力插入你的校园网 - @RuiJanLee

-----

7. OpenWrt高级玩法
-----

###7.1 定时重启

我们学校的规定晚上11点半到早上7点是断网的。  
断网之后客户端不能自动重新连接，需要重启路由。  

下面让路由器早上7点1分自动重启， 
这样每天早上7点，又可以自动上网了。 

这里使用linux的crontab服务实现定时规则。  

在`/etc/config/`下创建`h3cc_auto`文件如下：
```
1 7 * * * reboot

```

执行`crontab /etc/config/h3cc_auto`添加规则，  
使用`crontab -l`查看规则是否成功添加。  

###7.2 wifi睡眠

既然晚上断网，开着wifi也没什么意思，  
一天有24小时，如果一天睡8小时，   
人生1/3都在睡梦中，如果这时间关闭wifi，  
不但节约了能源，而且可以减少人生1/3的辐射。  

那就搞起吧。  

让路由在晚上12点自动关闭wifi，  
在`/etc/config/`下编辑`h3cc_auto`文件如下：
```
1 7 * * * reboot
59 23 * * * wifi down

```
执行`crontab /etc/config/h3cc_auto`添加规则，  
使用`crontab -l`查看规则是否成功添加。  

###7.3 多无线接入

你可能听过手机可以双卡双待，  
但是你可能第一次听说路由器可以双wifi吧，  
这可是比手机的双卡双待叼很多的哦，  
手机可以让两个人同时通话，互不干扰，  
而且只收一份电话费么！不行吧！  
（事实上同时发10个wifi都行）

下面就介绍我独创的一套心法，  
既然这套秘籍威力如此强大，自然心法也比较复杂，  
让我慢慢讲解。  

（技术细节调试中，敬请期待）





ip route add default via 10.15.35.254 table 100
#指定路由表100默认网关为10.0.0.1

ip rule add from 192.168.11.0/24 table 100
#添一个规则指定192.168.1.2 使用100表

ip rule del from 192.168.11.0/24 table 100
#删除规则

###7.4 其他玩法

- NAS
- 打印服务器
- PHP Web站点
- 智能家庭控制中心

# [下一章](https://github.com/ruijanlee/h3cc/blob/master/h3cc_ruijanlee/doc/c8.md)